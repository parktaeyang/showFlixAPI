<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layouts/adminLayout :: admin-layout('ë¡œê·¸ ê´€ë¦¬', 'logs')}">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <!-- ì½˜í…ì¸  ì˜ì—­ -->
    <div th:fragment="content">
        <div class="content-header">
            <h1>ğŸ“‹ ë¡œê·¸ ê´€ë¦¬</h1>
            <p>ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
        </div>

        <!-- ë¡œê·¸ í•„í„° -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>ë¡œê·¸ í•„í„°</h5>
            </div>
            <div class="card-body">
                <form id="logFilterForm">
                    <div class="row g-3">
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="mb-3">
                                <label for="logLevel" class="form-label">ë¡œê·¸ ë ˆë²¨</label>
                                <select class="form-select" id="logLevel" name="logLevel">
                                    <option value="">ëª¨ë“  ë ˆë²¨</option>
                                    <option value="ERROR">ERROR</option>
                                    <option value="WARN">WARN</option>
                                    <option value="INFO">INFO</option>
                                    <option value="DEBUG">DEBUG</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="mb-3">
                                <label for="startDate" class="form-label">ì‹œì‘ì¼</label>
                                <input type="date" class="form-control" id="startDate" name="startDate">
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="mb-3">
                                <label for="endDate" class="form-label">ì¢…ë£Œì¼</label>
                                <input type="date" class="form-control" id="endDate" name="endDate">
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="mb-3">
                                <label for="searchKeyword" class="form-label">ê²€ìƒ‰ì–´</label>
                                <input type="text" class="form-control" id="searchKeyword" name="searchKeyword" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary me-2">ê²€ìƒ‰</button>
                            <button type="button" class="btn btn-secondary" onclick="clearFilter()">ì´ˆê¸°í™”</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- ë¡œê·¸ ëª©ë¡ -->
        <div class="card">
            <div class="card-header">
                <div class="row g-3 align-items-center">
                    <div class="col-12 col-sm-6 col-lg-8">
                        <h5 class="mb-0">ë¡œê·¸ ëª©ë¡</h5>
                    </div>
                    <div class="col-12 col-sm-6 col-lg-4">
                        <div class="d-grid gap-2 d-sm-flex">
                            <button class="btn btn-sm btn-outline-primary" onclick="refreshLogs()">ìƒˆë¡œê³ ì¹¨</button>
                            <button class="btn btn-sm btn-outline-danger" onclick="clearLogs()">ë¡œê·¸ ì‚­ì œ</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ì‹œê°„</th>
                                <th>ë ˆë²¨</th>
                                <th>í´ë˜ìŠ¤</th>
                                <th>ë©”ì‹œì§€</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody id="logTableBody">
                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ì˜ì—­ -->
    <div th:fragment="scripts">
        <script>
            // ë¡œê·¸ ê´€ë¦¬ ì „ìš© ìŠ¤í¬ë¦½íŠ¸
            document.addEventListener('DOMContentLoaded', function() {
                // ì„œë¹„ìŠ¤ ì¤€ë¹„ì¤‘ì¸ ê²½ìš° ì•ŒëŸ¿ í‘œì‹œ í›„ ëŒ€ì‹œë³´ë“œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                if ([[${serviceNotReady}]]) {
                    showAlert('ì„œë¹„ìŠ¤ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.', 'warning');
                    setTimeout(() => {
                        window.location.href = '/admin';
                    }, 2000);
                    return;
                }
                
                setupLogManagement();
            });

            function setupLogManagement() {
                // ë¡œê·¸ í•„í„° í¼ ì„¤ì •
                const logFilterForm = document.getElementById('logFilterForm');
                if (logFilterForm) {
                    logFilterForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        showAlert('ë¡œê·¸ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.', 'info');
                    });
                }
            }

            function refreshLogs() {
                showAlert('ë¡œê·¸ ìƒˆë¡œê³ ì¹¨ ê¸°ëŠ¥ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.', 'info');
            }

            function clearLogs() {
                showAlert('ë¡œê·¸ ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.', 'info');
            }

            function clearFilter() {
                document.getElementById('logFilterForm').reset();
                showAlert('í•„í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }
        </script>
    </div>
</body>
</html> 