<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layouts/adminLayout :: admin-layout('스케줄 관리', 'schedule-management')}">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/scheduleManagement.css">
</head>
<body>
    <!-- 콘텐츠 영역 -->
    <div th:fragment="content">
        <div class="content-header">
            <h1>📊 스케줄 관리</h1>
            <p>월별 배우 스케줄을 관리하고 시간을 입력/수정할 수 있습니다.</p>
        </div>

        <!-- 월 선택 -->
        <div class="card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 style="font-size: 16px; margin: 0;">📅 스케줄 관리</h5>
                <div class="d-flex align-items-center">
                    <div class="me-3">
                        <select class="form-select form-select-sm" id="yearSelect" style="width: 100px;">
                            <option th:each="year : ${#numbers.sequence(2023, 2030)}"
                                    th:value="${year}"
                                    th:text="${year} + '년'"
                                    th:selected="${year == #dates.format(#dates.createNow(), 'yyyy')}">
                                2024년
                            </option>
                        </select>
                    </div>
                    <div class="me-3">
                        <select class="form-select form-select-sm" id="monthSelect" style="width: 80px;">
                            <option th:each="month : ${#numbers.sequence(1, 12)}"
                                    th:value="${month}"
                                    th:text="${month} + '월'"
                                    th:selected="${month == #dates.format(#dates.createNow(), 'MM')}">
                                1월
                            </option>
                        </select>
                    </div>
                    <button class="btn btn-primary btn-sm" onclick="loadScheduleTable()">조회</button>
                </div>
            </div>
        </div>

        <!-- 스케줄 테이블 -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 style="font-size: 16px; margin: 0;">📊 스케쥴 관리표</h5>
                <div>
                    <button class="btn btn-info btn-sm me-2" onclick="saveAllSchedules()">
                        <i class="fas fa-save"></i> 전체 저장
                    </button>
                    <button class="btn btn-success btn-sm" onclick="exportToExcel()">
                        <i class="fas fa-download"></i> 엑셀 내보내기
                    </button>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-container">
                    <table class="schedule-table" id="scheduleTable">
                        <thead>
                            <tr>
                                <th style="min-width: 80px;">날짜</th>
                                <!-- 배우 헤더는 JavaScript로 동적 생성 -->
                                <th style="min-width: 60px;">합계</th>
                            </tr>
                        </thead>
                        <tbody id="scheduleTableBody">
                            <!-- JavaScript로 동적 생성 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 스크립트 영역 -->
    <div th:fragment="scripts">
        <script src="/js/scheduleManagement.js"></script>
    </div>
</body>
</html>